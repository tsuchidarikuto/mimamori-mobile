{"openapi":"3.1.0","info":{"title":"Voice Assistant & Monitoring API","description":"高齢者見守りシステムAPI（3層アーキテクチャ）","version":"1.0.0"},"paths":{"/api/v1/conversations/process-audio":{"post":{"tags":["conversations"],"summary":"Process Audio","description":"音声を処理して応答音声を返す\n\n- 音声ファイルをアップロード\n- テキストに変換してAI応答を生成\n- 応答を音声に変換して返却","operationId":"process_audio_api_v1_conversations_process_audio_post","parameters":[{"name":"elderly_person_id","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Elderly Person Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_process_audio_api_v1_conversations_process_audio_post"}}}},"responses":{"200":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/elderly/{person_id}":{"get":{"tags":["elderly"],"summary":"Get Elderly Person","description":"高齢者の基本情報を取得","operationId":"get_elderly_person_api_v1_elderly__person_id__get","parameters":[{"name":"person_id","in":"path","required":true,"schema":{"type":"integer","title":"Person Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ElderlyPerson"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/elderly/{person_id}/conversations":{"get":{"tags":["elderly"],"summary":"Get Conversations","description":"指定日の会話データを取得","operationId":"get_conversations_api_v1_elderly__person_id__conversations_get","parameters":[{"name":"person_id","in":"path","required":true,"schema":{"type":"integer","title":"Person Id"}},{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"日付 (YYYY-MM-DD形式)","title":"Date"},"description":"日付 (YYYY-MM-DD形式)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/elderly/{person_id}/summaries":{"get":{"tags":["elderly"],"summary":"Get Daily Summary","description":"指定日の日次サマリーを取得","operationId":"get_daily_summary_api_v1_elderly__person_id__summaries_get","parameters":[{"name":"person_id","in":"path","required":true,"schema":{"type":"integer","title":"Person Id"}},{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"日付 (YYYY-MM-DD形式)","title":"Date"},"description":"日付 (YYYY-MM-DD形式)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailySummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["elderly"],"summary":"Generate Daily Summary","description":"日次サマリーを自動生成","operationId":"generate_daily_summary_api_v1_elderly__person_id__summaries_post","parameters":[{"name":"person_id","in":"path","required":true,"schema":{"type":"integer","title":"Person Id"}},{"name":"date","in":"query","required":false,"schema":{"type":"string","description":"日付 (YYYY-MM-DD形式)。未指定の場合は今日","title":"Date"},"description":"日付 (YYYY-MM-DD形式)。未指定の場合は今日"},{"name":"overwrite","in":"query","required":false,"schema":{"type":"boolean","description":"既存サマリーを上書きするかどうか","default":false,"title":"Overwrite"},"description":"既存サマリーを上書きするかどうか"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailySummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/elderly/{person_id}/dashboard":{"get":{"tags":["elderly"],"summary":"Get Dashboard Data","description":"ダッシュボード用の統合データを取得","operationId":"get_dashboard_data_api_v1_elderly__person_id__dashboard_get","parameters":[{"name":"person_id","in":"path","required":true,"schema":{"type":"integer","title":"Person Id"}},{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"日付 (YYYY-MM-DD形式)","title":"Date"},"description":"日付 (YYYY-MM-DD形式)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"tags":["health"],"summary":"Health Check","description":"サービスのヘルスチェック","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/":{"get":{"summary":"Root","description":"APIルート","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_process_audio_api_v1_conversations_process_audio_post":{"properties":{"audio":{"type":"string","format":"binary","title":"Audio","description":"音声ファイル"}},"type":"object","required":["audio"],"title":"Body_process_audio_api_v1_conversations_process_audio_post"},"ConversationListResponse":{"properties":{"conversations":{"items":{"$ref":"#/components/schemas/RawConversation"},"type":"array","title":"Conversations"},"total_count":{"type":"integer","title":"Total Count"}},"type":"object","required":["conversations","total_count"],"title":"ConversationListResponse","description":"会話履歴リストレスポンス"},"DailySummary":{"properties":{"id":{"type":"integer","title":"Id"},"elderly_person_id":{"type":"integer","title":"Elderly Person Id"},"date":{"type":"string","title":"Date"},"summary_text":{"type":"string","title":"Summary Text"},"emotional_state":{"type":"string","title":"Emotional State"},"health_summary":{"type":"string","title":"Health Summary"},"conversation_count":{"type":"integer","title":"Conversation Count"},"emotional_graph":{"items":{"$ref":"#/components/schemas/EmotionalDataPoint"},"type":"array","title":"Emotional Graph"}},"type":"object","required":["id","elderly_person_id","date","summary_text","emotional_state","health_summary","conversation_count","emotional_graph"],"title":"DailySummary"},"DashboardData":{"properties":{"elderlyPerson":{"anyOf":[{"$ref":"#/components/schemas/ElderlyPerson"},{"type":"null"}]},"dailySummary":{"anyOf":[{"$ref":"#/components/schemas/DailySummary"},{"type":"null"}]},"conversations":{"items":{"$ref":"#/components/schemas/RawConversation"},"type":"array","title":"Conversations"}},"type":"object","required":["elderlyPerson","dailySummary","conversations"],"title":"DashboardData"},"ElderlyPerson":{"properties":{"id":{"type":"integer","title":"Id"},"last_name":{"type":"string","title":"Last Name"},"first_name":{"type":"string","title":"First Name"},"age":{"type":"integer","title":"Age"}},"type":"object","required":["id","last_name","first_name","age"],"title":"ElderlyPerson"},"EmotionalDataPoint":{"properties":{"time":{"type":"string","title":"Time"},"score":{"type":"number","title":"Score"},"label":{"type":"string","title":"Label"}},"type":"object","required":["time","score","label"],"title":"EmotionalDataPoint"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["status"],"title":"HealthResponse"},"RawConversation":{"properties":{"id":{"type":"integer","title":"Id"},"elderly_person_id":{"type":"integer","title":"Elderly Person Id"},"timestamp":{"type":"string","title":"Timestamp"},"speaker":{"type":"string","title":"Speaker"},"content":{"type":"string","title":"Content"}},"type":"object","required":["id","elderly_person_id","timestamp","speaker","content"],"title":"RawConversation"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}